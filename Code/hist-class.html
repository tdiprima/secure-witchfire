<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Red Channel Histogram</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: "Open Sans", verdana, arial, sans-serif;
    }
  </style>
</head>
<body>
<input id="inputImage" onchange="handleImage()" type="file">
<div id="plotlyDiv"></div>
<img id="img">
<script>
  const average = array => array.reduce((a, b) => a + b) / array.length;

  function standardDeviation(array) {
    const mean = array.reduce((acc, val) => acc + val, 0) / array.length;
    const variance = array.reduce((acc, val) => acc + ((val - mean) ** 2), 0) / array.length;
    return Math.sqrt(variance);
  }

  function handleImage() {
    const fileInput = document.getElementById("inputImage");
    const image = new Image();
    image.src = URL.createObjectURL(fileInput.files[0]);
    document.getElementById("img").src = image.src;
    image.onload = function() {
      const canvas = document.createElement("canvas");
      canvas.width = image.width;
      canvas.height = image.height;
      const ctx = canvas.getContext("2d");
      ctx.drawImage(image, 0, 0);

      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
      let redValues = [];

      for (let i = 0; i < imageData.length; i += 4) {
        redValues.push(imageData[i + 2]); // BGR
      }

      drawHistogram(redValues);
    };
  }

  function drawHistogram(data) {
    const trace = {
      x: data,
      type: "histogram",
      marker: {
        color: "red"
      }
    };

    const layout = {
      title: "Red Channel (Class) Histogram",
      xaxis: {
        title: "Pixel Value"
      },
      yaxis: {
        title: "Frequency"
      }
    };

    Plotly.newPlot("plotlyDiv", [trace], layout);
  }
</script>
</body>
</html>
