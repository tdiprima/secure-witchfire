<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Water</title>
  <!-- https://threejs.org/docs/#api/en/textures/Texture -->
  <!-- https://threejs.org/examples/webgl_geometry_dynamic.html -->
  <link href="/stylesheets/main.css" rel="stylesheet">
</head>
<body>
<div id="info">
  <a href="https://threejs.org" rel="noopener" target="_blank">three.js</a> &ndash; water
</div>
<!-- <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script> -->
<script async src="/extra_html/utils/es-module-shims.js"></script>
<script type="importmap">
			{
				"imports": {
					"three": "../build/three.module.js"
				}
			}
</script>
<script type="module">
  import * as THREE from 'three';

  const worldWidth = 128, worldDepth = 128;

  let camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 20000);
  camera.position.y = 200;

  let scene = new THREE.Scene();
  scene.background = new THREE.Color(0xaaccff);
  scene.fog = new THREE.FogExp2(0xaaccff, 0.0007);

  let renderer = new THREE.WebGLRenderer({antialias: true});
  renderer.setPixelRatio(window.devicePixelRatio);
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  // load a texture, set wrap mode to repeat
  let texture = new THREE.TextureLoader().load("textures/water.jpg");
  texture.wrapS = THREE.RepeatWrapping;
  texture.wrapT = THREE.RepeatWrapping;
  texture.repeat.set(4, 4);

  let geometry = new THREE.PlaneGeometry(20000, 20000, worldWidth - 1, worldDepth - 1);
  geometry.rotateX(-Math.PI / 2);

  let material = new THREE.MeshBasicMaterial({color: 0x0044ff, map: texture});

  let mesh = new THREE.Mesh(geometry, material);
  scene.add(mesh);

  function animate() {
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
  }

  animate();
</script>
</body>
</html>
